# NEO Portal ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ»Git ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¬ã‚¤ãƒ‰

## ğŸ¯ ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥æ¦‚è¦

NEOãƒãƒ¼ã‚¿ãƒ«ã§ã¯**GitFlow**ãƒ™ãƒ¼ã‚¹ã®æœ¬ç•ªãƒ»ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒåˆ†é›¢æˆ¦ç•¥ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

### ğŸŒ³ ãƒ–ãƒ©ãƒ³ãƒæ§‹æˆ

| ãƒ–ãƒ©ãƒ³ãƒå | ç’°å¢ƒ | ç”¨é€” | ä¿è­·ãƒ¬ãƒ™ãƒ« |
|-----------|------|------|----------|
| `main` | **æœ¬ç•ªç’°å¢ƒ** | æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ç”¨ | ğŸ”’ ä¿è­·ãƒ–ãƒ©ãƒ³ãƒ |
| `staging` | **ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ** | ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼ç”¨ | âš ï¸ ãƒ¬ãƒ“ãƒ¥ãƒ¼å¿…é ˆ |
| `feature/*` | é–‹ç™ºç’°å¢ƒ | æ©Ÿèƒ½é–‹ç™ºç”¨ | ğŸ“ é–‹ç™ºç”¨ |
| `hotfix/*` | ç·Šæ€¥å¯¾å¿œ | ç·Šæ€¥ä¿®æ­£ç”¨ | ğŸš¨ ç·Šæ€¥ç”¨ |

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆç’°å¢ƒ

### æœ¬ç•ªç’°å¢ƒ (main ãƒ–ãƒ©ãƒ³ãƒ)
- **URL**: `https://neo.pages.dev` (Cloudflare Pages)
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Cloudflare D1 æœ¬ç•ªã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
- **ãƒ‡ãƒ—ãƒ­ã‚¤æ¡ä»¶**: staging ã‹ã‚‰ã®ãƒãƒ¼ã‚¸å¾Œã®ã¿
- **è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤**: main ãƒ–ãƒ©ãƒ³ãƒã¸ã®ãƒ—ãƒƒã‚·ãƒ¥æ™‚

### ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ (staging ãƒ–ãƒ©ãƒ³ãƒ)  
- **URL**: `https://staging.neo.pages.dev`
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: Cloudflare D1 ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç”¨
- **ãƒ‡ãƒ—ãƒ­ã‚¤æ¡ä»¶**: Pull Request æ‰¿èªå¾Œ
- **è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤**: staging ãƒ–ãƒ©ãƒ³ãƒã¸ã®ãƒ—ãƒƒã‚·ãƒ¥æ™‚

## ğŸ“‹ é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### 1ï¸âƒ£ æ–°æ©Ÿèƒ½é–‹ç™º

```bash
# 1. æœ€æ–°ã®stagingãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
git checkout staging
git pull origin staging
git checkout -b feature/æ–°æ©Ÿèƒ½å

# 2. é–‹ç™ºä½œæ¥­ã‚’å®Ÿæ–½
# ã‚³ãƒ¼ãƒ‰å®Ÿè£…ã€ãƒ†ã‚¹ãƒˆè¿½åŠ ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

# 3. ã‚³ãƒŸãƒƒãƒˆï¼ˆã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç´„ã«å¾“ã†ï¼‰
git add .
git commit -m "feat: æ–°æ©Ÿèƒ½ã®å®Ÿè£…

- å…·ä½“çš„ãªå¤‰æ›´å†…å®¹
- è¿½åŠ ã—ãŸæ©Ÿèƒ½ã®èª¬æ˜
- é–¢é€£ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›´æ–°"

# 4. ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦Pull Requestä½œæˆ
git push origin feature/æ–°æ©Ÿèƒ½å
# GitHubä¸Šã§Pull Requestä½œæˆ: feature/æ–°æ©Ÿèƒ½å â†’ staging
```

### 2ï¸âƒ£ ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# 1. Pull Requestãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»æ‰¿èªå¾Œ
# 2. stagingãƒ–ãƒ©ãƒ³ãƒã«ãƒãƒ¼ã‚¸
git checkout staging
git merge feature/æ–°æ©Ÿèƒ½å
git push origin staging

# 3. ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒã§æ¤œè¨¼
# URL: https://staging.neo.pages.dev
# å‹•ä½œç¢ºèªã€çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿæ–½
```

### 3ï¸âƒ£ æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# 1. ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒã§ã®æ¤œè¨¼å®Œäº†å¾Œ
git checkout main
git merge staging
git push origin main

# 2. æœ¬ç•ªç’°å¢ƒã«è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ
# URL: https://neo.pages.dev
# æœ¬ç•ªç’°å¢ƒã§ã®æœ€çµ‚ç¢ºèª
```

### 4ï¸âƒ£ ç·Šæ€¥ä¿®æ­£ï¼ˆHotfixï¼‰

```bash
# 1. mainãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰ç·Šæ€¥ä¿®æ­£ãƒ–ãƒ©ãƒ³ãƒä½œæˆ
git checkout main
git pull origin main
git checkout -b hotfix/ç·Šæ€¥ä¿®æ­£å†…å®¹

# 2. ä¿®æ­£å®Ÿè£…ãƒ»ãƒ†ã‚¹ãƒˆ
git add .
git commit -m "fix: ç·Šæ€¥ä¿®æ­£ã®å†…å®¹"

# 3. main/stagingã®ä¸¡æ–¹ã«ãƒãƒ¼ã‚¸
git checkout main
git merge hotfix/ç·Šæ€¥ä¿®æ­£å†…å®¹
git push origin main

git checkout staging  
git merge hotfix/ç·Šæ€¥ä¿®æ­£å†…å®¹
git push origin staging
```

## ğŸ“ ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç´„

### ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
```
<type>: <subject>

<body>

<footer>
```

### ã‚¿ã‚¤ãƒ—ä¸€è¦§
- `feat`: æ–°æ©Ÿèƒ½è¿½åŠ 
- `fix`: ãƒã‚°ä¿®æ­£
- `docs`: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
- `style`: ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¤‰æ›´
- `refactor`: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
- `test`: ãƒ†ã‚¹ãƒˆè¿½åŠ ãƒ»ä¿®æ­£
- `chore`: ãƒ“ãƒ«ãƒ‰ãƒ»è¨­å®šå¤‰æ›´

### ä¾‹
```
feat: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†æ©Ÿèƒ½ã«æ¨©é™ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ã‚’è¿½åŠ 

- ç®¡ç†è€…æ¨©é™ã§ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§è¡¨ç¤ºæ©Ÿèƒ½
- å½¹è·åˆ¥ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½
- æ¤œç´¢æ©Ÿèƒ½ã®æ”¹å–„

Fixes #123
```

## ğŸ” ãƒ–ãƒ©ãƒ³ãƒä¿è­·ãƒ«ãƒ¼ãƒ«

### main ãƒ–ãƒ©ãƒ³ãƒ
- âœ… Pull Requestå¿…é ˆ
- âœ… ãƒ¬ãƒ“ãƒ¥ãƒ¼æ‰¿èªå¿…é ˆï¼ˆ1åä»¥ä¸Šï¼‰
- âœ… ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒã‚§ãƒƒã‚¯å¿…é ˆ
- âœ… ç®¡ç†è€…ã«ã‚ˆã‚‹ç›´æ¥ãƒ—ãƒƒã‚·ãƒ¥ç¦æ­¢
- âœ… Force Pushç¦æ­¢

### staging ãƒ–ãƒ©ãƒ³ãƒ  
- âœ… Pull Requestå¿…é ˆ
- âœ… ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒã‚§ãƒƒã‚¯å¿…é ˆ
- âœ… Force Pushç¦æ­¢

## ğŸš¦ CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

### GitHub Actions ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```yaml
# .github/workflows/deploy.yml
name: Deploy to Cloudflare Pages

on:
  push:
    branches: [main, staging]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
      - name: Install dependencies
        run: npm ci
      - name: Run tests
        run: npm test
      - name: Build application  
        run: npm run build
      - name: Deploy to Cloudflare Pages
        run: npx wrangler pages deploy dist
        env:
          CLOUDFLARE_API_TOKEN: ${{ secrets.CLOUDFLARE_API_TOKEN }}
```

## ğŸ“Š ãƒªãƒªãƒ¼ã‚¹ç®¡ç†

### ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°
- **ãƒ¡ã‚¸ãƒ£ãƒ¼**: v1.0.0, v2.0.0ï¼ˆç ´å£Šçš„å¤‰æ›´ï¼‰
- **ãƒã‚¤ãƒŠãƒ¼**: v1.1.0, v1.2.0ï¼ˆæ–°æ©Ÿèƒ½è¿½åŠ ï¼‰  
- **ãƒ‘ãƒƒãƒ**: v1.0.1, v1.0.2ï¼ˆãƒã‚°ä¿®æ­£ï¼‰

### ãƒªãƒªãƒ¼ã‚¹ãƒ—ãƒ­ã‚»ã‚¹
1. **é–‹ç™ºå®Œäº†**: staging ãƒ–ãƒ©ãƒ³ãƒã§ã®æ¤œè¨¼å®Œäº†
2. **ãƒªãƒªãƒ¼ã‚¹æº–å‚™**: CHANGELOG.md æ›´æ–°
3. **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¿ã‚°**: `git tag v1.2.0`
4. **æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤**: main ãƒ–ãƒ©ãƒ³ãƒã«ãƒãƒ¼ã‚¸
5. **ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆ**: GitHub Releases ã§å…¬é–‹

## ğŸ”§ ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/spotsuku/neo.git
cd neo

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# ç’°å¢ƒå¤‰æ•°è¨­å®š
cp .env.example .env.local
# .env.local ã‚’ç·¨é›†

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
npm run db:migrate:local

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev:sandbox
```

## ğŸ†˜ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

**1. ãƒãƒ¼ã‚¸ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆ**
```bash
git status
git diff
# ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆè§£æ¶ˆå¾Œ
git add .
git commit -m "resolve: ãƒãƒ¼ã‚¸ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆè§£æ¶ˆ"
```

**2. ãƒ–ãƒ©ãƒ³ãƒåŒæœŸãšã‚Œ**  
```bash
git fetch origin
git rebase origin/staging
```

**3. é–“é•ã£ãŸã‚³ãƒŸãƒƒãƒˆ**
```bash
# ç›´å‰ã®ã‚³ãƒŸãƒƒãƒˆå–ã‚Šæ¶ˆã—
git reset --soft HEAD~1

# å¼·åˆ¶çš„ã«æˆ»ã™ï¼ˆæ³¨æ„ï¼‰
git reset --hard HEAD~1
```

## ğŸ“ ã‚µãƒãƒ¼ãƒˆãƒ»è³ªå•

- **æŠ€è¡“çš„è³ªå•**: GitHub Issues
- **ç·Šæ€¥æ™‚å¯¾å¿œ**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†è€…ã¸ç›´æ¥é€£çµ¡
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°**: Pull Request ã§ã”ææ¡ˆ

---

**æœ€çµ‚æ›´æ–°**: 2024-09-07  
**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³**: v1.0.0