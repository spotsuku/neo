<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®¡ç†è€…ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ - NEO Digital Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/auth.js"></script>
</head>
<body class="bg-gray-50 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-gray-800 mb-6">ç®¡ç†è€…ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ</h1>
        
        <div class="bg-white p-6 rounded-lg shadow mb-6">
            <h2 class="text-xl font-semibold mb-4">èªè¨¼ãƒ†ã‚¹ãƒˆ</h2>
            <div class="space-x-4">
                <button onclick="testAdminLogin()" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">
                    ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³
                </button>
                <button onclick="checkCurrentUser()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                    ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¢ºèª
                </button>
                <button onclick="goToMembersPage()" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
                    ä¼šå“¡ãƒšãƒ¼ã‚¸ã«ç§»å‹•
                </button>
                <button onclick="logout()" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
                    ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
                </button>
            </div>
        </div>
        
        <div class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-semibold mb-4">ãƒ†ã‚¹ãƒˆçµæœ</h2>
            <div id="test-results" class="space-y-2 text-sm font-mono bg-gray-100 p-4 rounded min-h-32">
                ãƒ†ã‚¹ãƒˆçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...
            </div>
        </div>
    </div>

    <script>
        function log(message) {
            const results = document.getElementById('test-results');
            const timestamp = new Date().toLocaleTimeString();
            results.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            results.scrollTop = results.scrollHeight;
        }

        function testAdminLogin() {
            log('ğŸ” ç®¡ç†è€…ã‚¯ã‚¤ãƒƒã‚¯ãƒ­ã‚°ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆé–‹å§‹');
            
            if (!window.authManager) {
                log('âŒ authManagerãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“');
                return;
            }
            
            const result = window.authManager.quickLogin('admin@neo.com', 'password123');
            log(`ğŸ“Š ãƒ­ã‚°ã‚¤ãƒ³çµæœ: ${JSON.stringify(result, null, 2)}`);
            
            if (result.success) {
                log('âœ… ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ');
                log(`ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼: ${result.user.name} (${result.user.role})`);
            } else {
                log('âŒ ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—: ' + result.message);
            }
        }
        
        function checkCurrentUser() {
            log('ğŸ‘¤ ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¢ºèª');
            
            if (!window.authManager) {
                log('âŒ authManagerãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“');
                return;
            }
            
            const user = window.authManager.getCurrentUser();
            log(`ğŸ“Š ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼: ${JSON.stringify(user, null, 2)}`);
            
            if (user) {
                log(`âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼æ¸ˆã¿: ${user.name} (${user.role})`);
                
                if (user.role === 'admin') {
                    log('âœ… ç®¡ç†è€…æ¨©é™ç¢ºèªæ¸ˆã¿ - ä¼šå“¡ãƒšãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½');
                } else {
                    log('âš ï¸ ç®¡ç†è€…æ¨©é™ãªã— - ä¼šå“¡ãƒšãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯');
                }
            } else {
                log('âŒ æœªèªè¨¼ - ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦');
            }
        }
        
        function goToMembersPage() {
            log('ğŸ“„ ä¼šå“¡ãƒšãƒ¼ã‚¸ã«ç§»å‹•');
            
            const user = window.authManager?.getCurrentUser();
            if (!user) {
                log('âŒ ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™');
                return;
            }
            
            if (user.role !== 'admin') {
                log('âŒ ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ã§ã™');
                return;
            }
            
            log('âœ… æ¨©é™ç¢ºèªæ¸ˆã¿ - ä¼šå“¡ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã—ã¾ã™');
            setTimeout(() => {
                window.location.href = '/admin-members.html';
            }, 1000);
        }
        
        function logout() {
            log('ğŸšª ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå®Ÿè¡Œ');
            
            if (window.authManager) {
                window.authManager.logout();
                log('âœ… ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå®Œäº†');
            } else {
                log('âŒ authManagerãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“');
            }
        }
        
        // åˆæœŸåŒ–
        window.addEventListener('load', function() {
            log('ğŸ”„ ãƒšãƒ¼ã‚¸åˆæœŸåŒ–å®Œäº†');
            log('ğŸ“‹ åˆ©ç”¨å¯èƒ½ãªæ“ä½œ: ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³ â†’ ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¢ºèª â†’ ä¼šå“¡ãƒšãƒ¼ã‚¸ã«ç§»å‹•');
        });
    </script>
</body>
</html>