<!DOCTYPE html>
<html>
<head>
    <title>Quick Login Test</title>
    <script src="/auth.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-md mx-auto bg-white rounded-lg shadow-lg p-6">
        <h1 class="text-2xl font-bold mb-4">ã‚¯ã‚¤ãƒƒã‚¯ãƒ­ã‚°ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ</h1>
        
        <div class="space-y-3">
            <button onclick="testQuickLogin('student')" 
                    class="w-full bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                ğŸ“ å­¦ç”Ÿã§ã‚¯ã‚¤ãƒƒã‚¯ãƒ­ã‚°ã‚¤ãƒ³
            </button>
            
            <button onclick="testQuickLogin('admin')" 
                    class="w-full bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">
                ğŸ‘‘ ç®¡ç†è€…ã§ã‚¯ã‚¤ãƒƒã‚¯ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆèªè¨¼ã‚³ãƒ¼ãƒ‰ç„¡ã—ï¼‰
            </button>
            
            <button onclick="testQuickLogin('company')" 
                    class="w-full bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600">
                ğŸ¢ ä¼æ¥­ã§ã‚¯ã‚¤ãƒƒã‚¯ãƒ­ã‚°ã‚¤ãƒ³
            </button>
            
            <button onclick="testNormalLogin()" 
                    class="w-full bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
                ğŸ” é€šå¸¸ãƒ­ã‚°ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆï¼ˆç®¡ç†è€…ãƒ»TOTPæœ‰ã‚Šï¼‰
            </button>
        </div>
        
        <div id="result" class="mt-4 p-3 bg-gray-50 border rounded hidden">
            <h3 class="font-bold">ãƒ†ã‚¹ãƒˆçµæœ:</h3>
            <pre id="result-text" class="text-sm mt-2"></pre>
        </div>
    </div>
    
    <script>
        window.addEventListener('load', function() {
            console.log('ğŸ§ª ã‚¯ã‚¤ãƒƒã‚¯ãƒ­ã‚°ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸åˆæœŸåŒ–');
            
            if (window.authManager) {
                console.log('âœ… AuthManager loaded successfully');
            } else {
                console.log('âŒ AuthManager not loaded');
            }
        });
        
        function testQuickLogin(type) {
            console.log(`ğŸš€ Testing quick login for: ${type}`);
            
            let email, password;
            if (type === 'student') {
                email = 'student@neo-academy.jp';
                password = 'student123';
            } else if (type === 'admin') {
                email = 'admin@neo.com';
                password = 'password123';
            } else if (type === 'company') {
                email = 'staff@techcorp.com';
                password = 'company123';
            }
            
            if (!window.authManager) {
                showResult('âŒ AuthManager not loaded', false);
                return;
            }
            
            // ã‚¯ã‚¤ãƒƒã‚¯ãƒ­ã‚°ã‚¤ãƒ³å®Ÿè¡Œ
            const result = window.authManager.quickLogin(email, password);
            console.log('Quick Login Result:', result);
            
            showResult(JSON.stringify(result, null, 2), result.success);
            
            if (result.success) {
                console.log('âœ… Quick login successful!');
                console.log('User:', result.user);
                
                // ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¢ºèª
                const session = window.authManager.getCurrentSession();
                console.log('Current session:', session);
            }
        }
        
        function testNormalLogin() {
            console.log('ğŸ” Testing normal login with TOTP');
            
            if (!window.authManager) {
                showResult('âŒ AuthManager not loaded', false);
                return;
            }
            
            // é€šå¸¸ãƒ­ã‚°ã‚¤ãƒ³å®Ÿè¡Œï¼ˆTOTPæœ‰ã‚Šï¼‰
            const result = window.authManager.login('admin@neo.com', 'password123', '123456');
            console.log('Normal Login Result:', result);
            
            showResult(JSON.stringify(result, null, 2), result.success);
        }
        
        function showResult(text, success) {
            const resultDiv = document.getElementById('result');
            const resultText = document.getElementById('result-text');
            
            resultText.textContent = text;
            resultDiv.classList.remove('hidden');
            
            if (success) {
                resultDiv.className = 'mt-4 p-3 bg-green-50 border border-green-200 rounded';
            } else {
                resultDiv.className = 'mt-4 p-3 bg-red-50 border border-red-200 rounded';
            }
        }
    </script>
</body>
</html>
